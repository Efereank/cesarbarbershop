-- --------------------------------------------------------
-- Host:                         localhost
-- Versión del servidor:         8.0.43 - MySQL Community Server - GPL
-- SO del servidor:              Win64
-- HeidiSQL Versión:             12.11.0.7065
-- --------------------------------------------------------

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET NAMES utf8 */;
/*!50503 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

-- Primero deshabilitar las restricciones de clave foránea
SET FOREIGN_KEY_CHECKS = 0;

-- Tabla roles (sin dependencias)
CREATE TABLE IF NOT EXISTS `roles` (
  `id` int NOT NULL AUTO_INCREMENT,
  `nombre` varchar(50) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `nombre` (`nombre`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Tabla usuarios (depende de roles)
CREATE TABLE IF NOT EXISTS `usuarios` (
  `id` int NOT NULL AUTO_INCREMENT,
  `nombre` varchar(60) DEFAULT NULL,
  `apellido` varchar(60) DEFAULT NULL,
  `telefono` varchar(11) DEFAULT NULL,
  `correo` varchar(60) DEFAULT NULL,
  `password` varchar(60) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci DEFAULT NULL,
  `admin` tinyint(1) DEFAULT NULL,
  `confirmado` tinyint(1) DEFAULT NULL,
  `token` varchar(15) DEFAULT NULL,
  `rolId` int DEFAULT '3',
  PRIMARY KEY (`id`),
  KEY `rolId` (`rolId`),
  CONSTRAINT `usuarios_ibfk_1` FOREIGN KEY (`rolId`) REFERENCES `roles` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=31 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Tabla barberos (depende de usuarios)
CREATE TABLE IF NOT EXISTS `barberos` (
  `id` int NOT NULL AUTO_INCREMENT,
  `usuarioId` int NOT NULL,
  `especialidad` varchar(100) DEFAULT NULL,
  `telefono` varchar(20) DEFAULT NULL,
  `estado` enum('activo','inactivo') DEFAULT 'activo',
  PRIMARY KEY (`id`),
  KEY `usuarioId` (`usuarioId`),
  CONSTRAINT `barberos_ibfk_1` FOREIGN KEY (`usuarioId`) REFERENCES `usuarios` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=24 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Tabla servicios (sin dependencias)
CREATE TABLE IF NOT EXISTS `servicios` (
  `id` int NOT NULL AUTO_INCREMENT,
  `nombre` varchar(50) DEFAULT NULL,
  `precio` decimal(7,2) DEFAULT NULL,
  `duracion` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=20 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Tabla tasa (sin dependencias)
CREATE TABLE IF NOT EXISTS `tasa` (
  `id` int NOT NULL AUTO_INCREMENT,
  `tasaBs` decimal(5,2) NOT NULL,
  `fecha_actualizacion` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=17 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Tabla citas (depende de usuarios y barberos)
CREATE TABLE IF NOT EXISTS `citas` (
  `id` int NOT NULL AUTO_INCREMENT,
  `fecha` date DEFAULT NULL,
  `hora` time DEFAULT NULL,
  `hora_fin` time DEFAULT NULL,
  `usuarioId` int DEFAULT NULL,
  `duracion` int DEFAULT '30',
  `barberoId` int DEFAULT NULL,
  `confirmada` tinyint(1) DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `usuariosId` (`usuarioId`),
  KEY `citas_ibfk_1` (`barberoId`),
  CONSTRAINT `citas_ibfk_1` FOREIGN KEY (`barberoId`) REFERENCES `barberos` (`id`) ON DELETE CASCADE,
  CONSTRAINT `usuariosId` FOREIGN KEY (`usuarioId`) REFERENCES `usuarios` (`id`) ON DELETE SET NULL ON UPDATE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=345 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Tabla citasservicios (depende de citas y servicios)
CREATE TABLE IF NOT EXISTS `citasservicios` (
  `id` int NOT NULL AUTO_INCREMENT,
  `citaId` int DEFAULT NULL,
  `servicioId` int DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `servicioId` (`servicioId`),
  KEY `citaId` (`citaId`),
  CONSTRAINT `citaId` FOREIGN KEY (`citaId`) REFERENCES `citas` (`id`) ON DELETE SET NULL ON UPDATE SET NULL,
  CONSTRAINT `servicioId` FOREIGN KEY (`servicioId`) REFERENCES `servicios` (`id`) ON DELETE SET NULL ON UPDATE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=342 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Insertar datos en roles
INSERT IGNORE INTO `roles` (`id`, `nombre`) VALUES
(1, 'admin'),
(2, 'barbero'),
(3, 'cliente');

-- Insertar datos en usuarios
INSERT IGNORE INTO `usuarios` (`id`, `nombre`, `apellido`, `telefono`, `correo`, `password`, `admin`, `confirmado`, `token`, `rolId`) VALUES
(13, 'Admin', 'Superpoderoso', '12345678910', 'correo69@correo.com', '$2y$10$YuSzcnk8Oz9bbEL9mL5T6ObXtNm5HYY.A/9sVlkpQNnV9FOyzwIlW', 1, 1, '', 1),
(14, 'kiki', 'lopez', '', 'correo70@correo.com', '$2y$10$Flck8YiuHYpAM9VF2hh2GeSIJTmpiXxkYNM1MweP.axgZ7.WNHsMe', 0, 1, '68fd62e04dbd1', 3),
(16, 'frank', 'diaz', '04125052658', 'correo@correo.com', '$2y$10$zbvovXBzbffFdCOcGkUmX.Q4oW81yg9h.F2JhR.saM4WWOi4k5JG.', 0, 1, '', 2),
(17, 'Luis ', 'Lopez', '', 'correo32@correo.com', '$2y$10$AYHjLaNZ9UMQ3XrTkk9j2.Qe7LWSD3B3TSiDsdafTIk5kYHcgp4Zu', 0, 1, '', 3),
(18, 'Roberto', 'Gomez Bolaños', '04124656958', 'correo101@correo.com', '$2y$10$cuoG/GJDWarxQWvhGAExdehrJKi5DHmQiNDv7S7/Ca8fBXA16HJsK', 0, 0, '68fd5d95f39a9', 3),
(19, 'Roliborto', 'Cacatúa', '04124656958', 'correo2025@correo.com', '$2y$10$QdFGqyTo3CrgOKKoKCv3m.3RSfkgfacRexv8MPMbQ.0m6X9mR.mJ.', 0, 0, '68fd5fd2cf17d', 3),
(20, 'Mirelis', 'Linares', '', 'mariacaro@gmail.com', '$2y$10$3YPQM/uRGXwgaaJ3MzSYvO/Ujm9yhWuh4f1Aegkuv6xt.LAgsbh/C', 0, 0, '68fd81a9c3d16', 3),
(21, 'Maria ', 'Linares', '', 'mariac@correo.com', '$2y$10$TU3aLl/aBGS1nBL8ueKTFu/doQ1Ncf7.i/P9Ugp/KRXGlfA/wWYcW', 0, 1, '', 3),
(22, 'frank', 'Linares', '0412466666', 'correo24@correo.com', '$2y$10$NdpdydPVWh2J4G4tNQNYoeQZqJSi8XGFFuwemKCzK1P9NlcG6bu.K', 0, 1, '', 3),
(23, 'Mohamed', 'Lopez', '04125658956', 'correo12@correo.com', '$2y$10$EMg11r7go91ST/rH1.l4L.ea5CffNn9jiJfrJ2wNklsQmeXoZV3gO', 0, 1, '', 3),
(24, 'Daniel ', 'Diaz', '04124636917', 'correo30@correo.com', '$2y$10$kloRYHXfcU2VevLi2bXi7OqZ/YzLBC3IKtFWXKRNc.p1bRxNul0HC', 0, 1, '', 3),
(25, '        ', '          ', '04124656958', 'correo45@correo.com', '$2y$10$NLpZARSvDCwB0HpESu58jOW8ib9hzZIqFDaII1tkd2oTqxQDAneaW', 0, 0, '693b725f4f8e4', 3),
(26, '         ', '         ', '04124636917', 'correo33@correo.com', '$2y$10$Td2myDKT5lKN51Lw6R1v2O2WOtIuIs3x7UsPdsN5OU2kpTVcdIQru', 0, 0, '693b744e39f3b', 3),
(27, '           ', '               ', '04124636917', 'correo303@correo.com', '$2y$10$an8Mt99g/Lwb4TlTksl7ceNqWGr8btUbGLYRH9z56BXJ/5erifJoa', 0, 0, '693b74ceeeeec', 3),
(28, '           ', '         ', '04124636917', 'correo3030@correo.com', '$2y$10$llozDKngS/TbITyXk2AtOOalA3Yd1riQOrSGdfpV9w5Ebgyfhmy7O', 0, 0, '693b76370b777', 3),
(29, '             ', '                ', '04124636917', 'correo30s30@correo.com', '$2y$10$3PI4.TUzGGAif5s0NFZ4EurgATvZu8yKLniO5R2AEa.U6FR.j6R3C', 0, 1, '', 3),
(30, 'Frank', 'Diaz', '04124656958', 'correo151@correo.com', '$2y$10$SkLQJOkkEZ1Ri1DRK4qJa.W.RmggVlomt4ZbERenBA.auYiVaRynG', 0, 1, '', 3);

-- Insertar datos en barberos
INSERT IGNORE INTO `barberos` (`id`, `usuarioId`, `especialidad`, `telefono`, `estado`) VALUES
(20, 16, 'Multifacético ', '04124656958', 'activo');

-- Insertar datos en servicios
INSERT IGNORE INTO `servicios` (`id`, `nombre`, `precio`, `duracion`) VALUES
(2, 'Corte de Cabello Hombre', 5.00, 30),
(3, 'Corte de Barba', 2.00, 15),
(5, 'Peinado Hombre', 6.00, 15),
(6, 'Tinte', 25.00, 30),
(8, 'Lavado de Cabello', 8.00, 15),
(11, 'Tratamiento Cápilar', 12.00, 30),
(15, 'Corte de Cabello Varón', 7.00, 30),
(17, 'Rayas', 2.00, 5),
(18, 'Corte de Cabello hembra', 6.00, 15),
(19, 'Corte de Cabello Niño', 7.00, 30);

-- Insertar datos en tasa
INSERT IGNORE INTO `tasa` (`id`, `tasaBs`, `fecha_actualizacion`) VALUES
(1, 30.00, '2025-10-27 13:41:56'),
(2, 120.00, '2025-10-27 13:46:28'),
(3, 0.00, '2025-10-27 23:37:53'),
(4, 0.00, '2025-10-27 23:38:07'),
(5, 0.00, '2025-10-27 23:39:07'),
(6, 0.00, '2025-10-27 23:40:50'),
(7, 0.00, '2025-10-27 23:40:59'),
(8, 0.00, '2025-10-27 23:41:20'),
(9, 200.00, '2025-10-27 23:43:13'),
(10, 40.00, '2025-10-27 23:54:34'),
(11, 0.00, '2025-10-28 00:01:41'),
(12, 80.00, '2025-10-28 00:04:02'),
(13, 50.00, '2025-10-28 00:13:54'),
(14, 0.00, '2025-10-28 00:16:17'),
(15, 0.00, '2025-10-28 00:16:17'),
(16, 500.00, '2026-01-16 16:50:46');

-- Insertar datos en citas
INSERT IGNORE INTO `citas` (`id`, `fecha`, `hora`, `hora_fin`, `usuarioId`, `duracion`, `barberoId`, `confirmada`) VALUES
(238, '2025-11-14', '14:00:00', '14:30:00', 13, 30, 20, 0),
(240, '2025-11-14', '14:30:00', '15:00:00', 13, 30, 20, 0),
(241, '2025-11-14', '15:00:00', '15:30:00', 13, 30, 20, 0),
(254, '2025-11-14', '15:45:00', '16:15:00', 13, 30, 20, 0),
(326, '2025-11-15', '16:15:00', '16:45:00', 13, 30, 20, 0),
(332, '2025-11-17', '10:00:00', '10:30:00', 14, 30, 20, 0),
(336, '2025-12-12', '10:00:00', '10:30:00', 14, 30, 20, 0),
(337, '2025-12-12', '10:30:00', '11:00:00', 14, 30, 20, 0),
(338, '2025-12-12', '11:00:00', '11:30:00', 14, 30, 20, 0),
(339, '2025-12-12', '11:30:00', '12:00:00', 13, 30, 20, 0),
(340, '2025-12-15', '10:00:00', '10:30:00', 14, 30, 20, 0),
(341, '2026-01-17', '10:00:00', '10:30:00', 14, 30, 20, 0),
(342, '2026-01-17', '10:30:00', '11:00:00', 14, 30, 20, 0),
(343, '2026-01-17', '11:30:00', '12:00:00', 13, 30, 20, 0),
(344, '2026-01-17', '12:30:00', '13:00:00', 13, 30, 20, 0);

-- Insertar datos en citasservicios
INSERT IGNORE INTO `citasservicios` (`id`, `citaId`, `servicioId`) VALUES
(2, NULL, NULL),
(3, NULL, 2),
(4, NULL, 3),
(5, NULL, 5),
(6, NULL, 8),
(7, NULL, 2),
(8, NULL, 3),
(9, NULL, NULL),
(10, NULL, NULL),
(11, NULL, 2),
(12, NULL, 3),
(13, NULL, 2),
(14, NULL, 3),
(15, NULL, 2),
(16, NULL, 3),
(17, NULL, NULL),
(18, NULL, NULL),
(19, NULL, 3),
(20, NULL, 2),
(21, NULL, 2),
(22, NULL, 3),
(23, NULL, 2),
(24, NULL, 2),
(25, NULL, 3),
(26, NULL, NULL),
(27, NULL, 8),
(28, NULL, 8),
(29, NULL, NULL),
(30, NULL, 2),
(31, NULL, NULL),
(32, NULL, 6),
(33, NULL, NULL),
(34, NULL, NULL),
(35, NULL, 2),
(36, NULL, NULL),
(37, NULL, 2),
(38, NULL, 2),
(39, NULL, NULL),
(40, NULL, NULL),
(41, NULL, 6),
(42, NULL, NULL),
(43, NULL, 3),
(44, NULL, 5),
(45, NULL, NULL),
(46, NULL, NULL),
(47, NULL, NULL),
(48, NULL, 6),
(49, NULL, 6),
(50, NULL, 3),
(51, NULL, NULL),
(52, NULL, 2),
(53, NULL, 2),
(54, NULL, 2),
(55, NULL, 2),
(56, NULL, 2),
(57, NULL, NULL),
(58, NULL, 2),
(59, NULL, 2),
(60, NULL, 2),
(61, NULL, 2),
(62, NULL, 2),
(63, NULL, 2),
(64, NULL, 2),
(65, NULL, 2),
(66, NULL, 2),
(67, NULL, NULL),
(68, NULL, 2),
(69, NULL, 2),
(70, NULL, 2),
(71, NULL, 2),
(72, NULL, NULL),
(73, NULL, 2),
(74, NULL, 2),
(75, NULL, 2),
(76, NULL, 2),
(77, NULL, 2),
(78, NULL, NULL),
(79, NULL, NULL),
(80, NULL, NULL),
(81, NULL, 2),
(82, NULL, NULL),
(83, NULL, 2),
(84, NULL, 2),
(85, NULL, 2),
(86, NULL, 2),
(87, NULL, 2),
(88, NULL, 2),
(89, NULL, 2),
(90, NULL, 2),
(91, NULL, NULL),
(92, NULL, 5),
(93, NULL, NULL),
(94, NULL, NULL),
(95, NULL, 2),
(96, NULL, 6),
(97, NULL, 5),
(98, NULL, 2),
(99, NULL, NULL),
(100, NULL, NULL),
(101, NULL, NULL),
(102, NULL, 2),
(103, NULL, 2),
(104, NULL, NULL),
(105, NULL, NULL),
(106, NULL, 2),
(107, NULL, 2),
(108, NULL, 2),
(109, NULL, 3),
(110, NULL, 2),
(111, NULL, 2),
(112, NULL, NULL),
(113, NULL, NULL),
(114, NULL, NULL),
(115, NULL, 2),
(116, NULL, 2),
(117, NULL, NULL),
(118, NULL, 2),
(119, NULL, 17),
(120, NULL, NULL),
(121, NULL, 2),
(122, NULL, 2),
(123, NULL, 2),
(124, NULL, 2),
(125, NULL, 2),
(126, NULL, 2),
(127, NULL, 2),
(128, NULL, 2),
(129, NULL, NULL),
(130, NULL, 2),
(131, NULL, 2),
(132, NULL, 2),
(133, NULL, 2),
(134, NULL, 2),
(135, NULL, 2),
(136, NULL, 2),
(137, NULL, 2),
(138, NULL, 2),
(139, NULL, 2),
(140, NULL, 2),
(141, NULL, 2),
(142, NULL, 3),
(143, NULL, 3),
(144, NULL, 2),
(145, NULL, 3),
(146, NULL, 2),
(147, NULL, 3),
(148, NULL, 2),
(149, NULL, 3),
(150, NULL, 3),
(151, NULL, 2),
(152, NULL, 3),
(153, NULL, 2),
(154, NULL, 3),
(155, NULL, 3),
(156, NULL, 2),
(157, NULL, 6),
(158, NULL, 2),
(159, NULL, 2),
(160, NULL, 2),
(161, NULL, 3),
(162, NULL, 5),
(163, NULL, 2),
(164, NULL, 2),
(165, NULL, 2),
(166, NULL, 5),
(167, NULL, 2),
(168, NULL, 2),
(169, NULL, 2),
(170, NULL, 2),
(171, NULL, 2),
(172, NULL, 2),
(173, NULL, 6),
(174, NULL, 2),
(175, NULL, 2),
(176, NULL, 5),
(177, NULL, 2),
(178, NULL, 2),
(179, NULL, 2),
(180, NULL, 2),
(181, NULL, 2),
(182, NULL, 3),
(183, NULL, 2),
(184, NULL, 2),
(185, NULL, 2),
(186, NULL, 2),
(187, NULL, 2),
(188, NULL, 2),
(189, NULL, 2),
(190, NULL, 2),
(191, NULL, 2),
(192, NULL, 2),
(193, NULL, 8),
(194, NULL, 2),
(195, NULL, 2),
(196, NULL, 2),
(197, NULL, 2),
(198, NULL, 2),
(199, NULL, 2),
(200, NULL, 5),
(201, NULL, 2),
(202, NULL, 2),
(203, NULL, 5),
(204, NULL, 3),
(205, NULL, 2),
(206, NULL, 2),
(207, NULL, 2),
(208, NULL, 2),
(209, NULL, 2),
(210, NULL, 15),
(211, NULL, 5),
(212, NULL, 2),
(213, NULL, 2),
(214, NULL, 2),
(215, NULL, 2),
(216, NULL, 2),
(217, NULL, 2),
(218, NULL, 2),
(219, NULL, 2),
(220, NULL, 2),
(221, NULL, 2),
(222, NULL, 2),
(223, NULL, 2),
(224, NULL, 2),
(225, NULL, 2),
(226, NULL, 2),
(227, NULL, 2),
(228, NULL, 2),
(229, NULL, 2),
(230, NULL, 2),
(231, NULL, 2),
(232, NULL, 2),
(233, 238, 2),
(234, NULL, 2),
(235, 240, 2),
(236, 241, 2),
(237, NULL, 2),
(238, NULL, 2),
(239, NULL, 2),
(240, NULL, 2),
(241, NULL, 2),
(242, NULL, 2),
(243, NULL, 2),
(244, NULL, 2),
(245, NULL, 2),
(246, NULL, 2),
(247, NULL, 2),
(248, NULL, 2),
(249, 254, 2),
(250, NULL, 2),
(251, NULL, 2),
(252, NULL, 2),
(253, NULL, 2),
(254, NULL, 2),
(255, NULL, 2),
(256, NULL, 2),
(257, NULL, 2),
(258, NULL, 2),
(259, NULL, 2),
(260, NULL, 2),
(261, NULL, 2),
(262, NULL, 2),
(263, NULL, 2),
(264, NULL, 2),
(265, NULL, 2),
(266, NULL, 2),
(267, NULL, 2),
(268, NULL, 2),
(269, NULL, 2),
(270, NULL, 2),
(271, NULL, 2),
(272, NULL, 2),
(273, NULL, 5),
(274, NULL, 2),
(275, NULL, 2),
(276, NULL, 2),
(277, NULL, 2),
(278, NULL, 2),
(279, NULL, 2),
(280, NULL, 2),
(281, NULL, 3),
(282, NULL, 2),
(283, NULL, 2),
(284, NULL, 2),
(285, NULL, 2),
(286, NULL, 2),
(287, NULL, 2),
(288, NULL, 2),
(289, NULL, 2),
(290, NULL, 2),
(291, NULL, 2),
(292, NULL, 2),
(293, NULL, 2),
(294, NULL, 2),
(295, NULL, 2),
(296, NULL, 2),
(297, NULL, 2),
(298, NULL, 2),
(299, NULL, 2),
(300, NULL, 2),
(301, NULL, 2),
(302, NULL, 2),
(303, NULL, 2),
(304, NULL, 2),
(305, NULL, 2),
(306, NULL, 2),
(307, NULL, 2),
(308, NULL, 2),
(309, NULL, 2),
(310, NULL, 3),
(311, NULL, 2),
(312, NULL, 2),
(313, NULL, 2),
(314, NULL, 2),
(315, NULL, 2),
(316, NULL, 2),
(317, NULL, 2),
(318, NULL, 2),
(319, NULL, 3),
(320, NULL, 2),
(321, NULL, 2),
(322, NULL, 2),
(323, 326, 2),
(324, NULL, 2),
(325, NULL, 2),
(326, NULL, 2),
(327, NULL, 2),
(328, NULL, 2),
(329, 332, 2),
(330, NULL, 2),
(331, NULL, 2),
(332, NULL, 2),
(333, 336, 2),
(334, 337, 2),
(335, 338, 2),
(336, 339, 2),
(337, 340, 2),
(338, 341, 2),
(339, 342, 2),
(340, 343, 2),
(341, 344, 2);

-- Reactivar las restricciones de clave foránea
SET FOREIGN_KEY_CHECKS = 1;

/*!40103 SET TIME_ZONE=IFNULL(@OLD_TIME_ZONE, 'system') */;
/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IFNULL(@OLD_FOREIGN_KEY_CHECKS, 1) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40111 SET SQL_NOTES=IFNULL(@OLD_SQL_NOTES, 1) */;